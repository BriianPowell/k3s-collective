apiVersion: v1
kind: ConfigMap
metadata:
  name: homepage
  namespace: kube-system
  labels:
    app: homepage
data:
  kubernetes.yaml: |
    mode: cluster
  settings.yaml: |
    title: Home
    color: zinc
    headerStyle: boxed
    cardBlur: sm
    quicklaunch:
      searchDescriptions: true
      hideInternetSearch: false
      hideVisitURL: true
    layout:
      - Monitoring:
          style: row
          columns: 3
      - Tools:
          style: row
          columns: 3
      - Identity:
          style: row
          columns: 3
      - Crypto:
          style: row
          columns: 3
    hideVersion: true
  bookmarks.yaml: |
    - Crypto:
      - Coinbase:
          - icon: https://companieslogo.com/img/orig/COIN-a63dbab3.png?t=1648737284
            href: https://www.coinbase.com/
      - Kraken:
          - icon: https://kryptoguiden.no/wp-content/uploads/2021/03/kraken_logo.png
            href: https://pro.kraken.com/
      - Gemini:
          - icon: https://www.gemini.com/_next/image?url=%2Fstatic%2Fimages%2Fgemini-hor-light-full-rgb%403x.png&w=128&q=75
            href: https://www.gemini.com/
  services.yaml: |
    - Monitoring:
      - Prometheus:
          icon: prometheus
          href: https://prometheus.powell.place
          description:
          ping: https://prometheus.powell.place
          target: _blank
          widget:
            type: prometheus
            fields: ["targets_up", "targets_down", "targets_total"]
            url: http://monitor-prometheus.monitoring:9090
      - Grafana:
          icon: grafana
          href: https://grafana.powell.place
          description:
          ping: https://grafana.powell.place
          target: _blank
          widget:
            type: grafana
            url: http://grafana.monitoring:80
            fields: ["dashboards", "datasources"] # "totalalerts", "alertstriggered"
            username: {{HOMEPAGE_VAR_GRAFANA_LOGIN}}
            password: {{HOMEPAGE_VAR_GRAFANA_PASS}}
      - Unifi:
          icon: https://cdn.icon-icons.com/icons2/2108/PNG/512/ubiquiti_icon_130804.png
          href: https://unifi.ui.com
          description:
          ping: https://10.0.0.1
          target: _blank
          widget:
            type: unifi
            url: https://10.0.0.1
            username: {{HOMEPAGE_VAR_UNIFI_LOGIN}}
            password: {{HOMEPAGE_VAR_UNIFI_PASS}}
      - Alert Manager:
          icon: alertmanager
          href: https://alertmanager.powell.place
          description:
          ping: https://alertmanager.powell.place
          target: _blank
    - Tools:
      - Traefik:
          icon: traefik
          href: https://traefik.powell.place
          description:
          ping: https://traefik.powell.place
          target: _blank
          # widget:
          #   type: traefik
          #   fields: ["routers", "services", "middleware"]
          #   url: https://traefik.powell.place
          #   username: {{HOMEPAGE_VAR_KEYCLOAK_LOGIN}}
          #   password: {{HOMEPAGE_VAR_KEYCLOAK_PASS}}
      - Nextcloud:
          icon: nextcloud
          href: https://nextcloud.powell.place
          description:
          ping: https://nextcloud.powell.place
          target: _blank
          widget:
            type: nextcloud
            fields: ["cpuload", "memoryusage", "freespace", "activeusers", "numfiles", "numshares"]
            url: https://nextcloud.powell.place
            key: {{HOMEPAGE_VAR_NEXTCLOUD_TOKEN}}
      - Home Assistant:
          icon: home-assistant
          href: https://ha.powell.place
          description:
          ping: https://ha.powell.place
          target: _blank
          widget:
            type: homeassistant
            fields: ["people_home", "lights_on", "switches_on"]
            url: http://homeassistant.homeassistant:8123
            key: {{HOMEPAGE_VAR_HA_TOKEN}}
            # https://gethomepage.dev/en/services/homeassistant/
      - Wiki:
          icon: https://static.requarks.io/logo/wikijs-butterfly.svg
          href: https://wiki.powell.place
          description:
          ping: https://wiki.powell.place\
          target: _blank
    - Identity:
      - Keycloak:
          icon: keycloak
          href: https://keycloak.powell.place
          description:
          ping: https://keycloak.powell.place
          target: _blank
    - Crypto:
      - Market:
          icon: mdi-bitcoin
          widget:
            type: coinmarketcap
            currency: USD # Optional
            symbols: [BTC, LTC, ETH]
            key: {{HOMEPAGE_VAR_CRYPTO_MARKET}}
  widgets.yaml: |
    # - resources:
    #     # change backend to 'kubernetes' to use Kubernetes integration. Requires RBAC.
    #     backend: kubernetes
    #     expanded: true
    #     cpu: true
    #     memory: true
    # show the kubernetes widget, with the cluster summary and individual nodes
    - kubernetes:
        cluster:
          show: true
          cpu: true
          memory: true
          showLabel: true
          label: "sheol"
        nodes:
          show: true
          cpu: true
          memory: true
          showLabel: true
    - search:
        provider: duckduckgo
        target: _blank
    - datetime:
        text_size: 2x1
        format:
          dateStyle: short
          timeStyle: short
          hourCycle: h23
    - openmeteo:
        timezone: America/Los_Angeles # optional
        units: imperial # or metric
        cache: 5 # Time in minutes to cache API responses, to stay within limits
  docker.yaml: |
