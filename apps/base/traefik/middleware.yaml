# apiVersion: traefik.io/v1alpha1
# kind: Middleware
# metadata:
#   name: bouncer
#   namespace: kube-system
# spec:
#   plugin:
#     bouncer:
#       enabled: true
#       crowdsecMode: stream
#       crowdsecLapiScheme: https
#       crowdsecLapiHost: crowdsec-service.crowdsec:8080
#       crowdsecLapiTLSCertificateAuthorityFile: /etc/traefik/crowdsec-certs/ca.crt
#       crowdsecLapiTLSCertificateBouncerFile: /etc/traefik/crowdsec-certs/tls.crt
#       crowdsecLapiTLSCertificateBouncerKeyFile: /etc/traefik/crowdsec-certs/tls.key
# ---
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: security
  namespace: kube-system
spec:
  headers:
    frameDeny: true
    sslRedirect: true
    browserXssFilter: true
    contentTypeNosniff: true
    contentSecurityPolicy: "default-src 'self' 'unsafe-inline'"
    customFrameOptionsValue: 'SAMEORIGIN'
    referrerPolicy: 'same-origin'
    featurePolicy: "vibrate 'self'"
    #HSTS Configuration
    stsIncludeSubdomains: true
    stsPreload: true
    stsSeconds: 31536000
    forceSTSHeader: true
