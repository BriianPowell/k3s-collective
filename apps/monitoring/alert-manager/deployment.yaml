apiVersion: monitoring.coreos.com/v1
kind: Alertmanager
metadata:
  name: alertmanager
  namespace: monitoring
spec:
  replicas: 1
  externalUrl: 'https://alertmanager.powell.place'
  alertmanagerConfiguration: alertmanager-config
  containers:
    - name: alertmanager
      ports:
        - name: http
          containerPort: 9093
      resources:
        requests:
          cpu: 10m
          memory: 20Mi
        limits:
          cpu: 250m
          memory: 500Mi
      volumeMounts:
        - name: templates-volume
          mountPath: /etc/alertmanager-templates
  volumes:
    - name: templates-volume
      configMap:
        name: alertmanager-templates
